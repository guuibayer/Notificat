{"version":3,"sources":["src/services/webhook.js"],"names":["WebhookService","req","res","query","FACEBOOK_PAGE_ACCESS_TOKEN","send","sender","text","token","messageData","url","qs","access_token","method","json","recipient","id","message","error","response","body","console","log","messagingEvents","entry","messaging","i","length","event","sendTextMessage","substring","postback","JSON","stringify","textMessage","sendStatus"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;IAEMA,c;AACJ,4BAAe;AAAA;AAAE;;;;gCAEJC,G,EAAKC,G,EAAK;AACrB,UAAI,CAACD,IAAIE,KAAJ,CAAU,kBAAV,CAAD,KAAmC,gBAAOC,0BAA9C,EAA0E;AACxE,eAAOF,IAAIG,IAAJ,CAAS,oBAAT,CAAP;AACD;;AAED,aAAOH,IAAIG,IAAJ,CAASJ,IAAIE,KAAJ,CAAU,eAAV,CAAT,CAAP;AACD;;;gCA2BYG,M,EAAQC,I,EAAMC,K,EAAO;AAChC,UAAIC,cAAc,EAAEF,MAAMA,IAAR,EAAlB;;AAEA,6BAAQ;AACNG,aAAK,6CADC;AAENC,YAAI,EAAEC,cAAcJ,KAAhB,EAFE;AAGNK,gBAAQ,MAHF;AAINC,cAAM;AACJC,qBAAW,EAAEC,IAAIV,MAAN,EADP;AAEJW,mBAASR;AAFL;AAJA,OAAR,EAQG,UAACS,KAAD,EAAQC,QAAR,EAAkBC,IAAlB,EAA2B;AAC5B,YAAIF,KAAJ,EAAW;AACTG,kBAAQC,GAAR,CAAY,0BAAZ,EAAwCJ,KAAxC;AACA;AACD;AACD,YAAIC,SAASC,IAAT,CAAcF,KAAlB,EAAyB;AACvBG,kBAAQC,GAAR,CAAY,SAAZ,EAAuBH,SAASC,IAAT,CAAcF,KAArC;AACA;AACD;AACF,OAjBD;AAkBD;;;iCA9CoBjB,G,EAAKC,G,EAAK;AAC7B,UAAIqB,kBAAkBtB,IAAImB,IAAJ,CAASI,KAAT,CAAe,CAAf,EAAkBC,SAAxC;;AAEAJ,cAAQC,GAAR,CAAYrB,IAAImB,IAAhB;;AAEA,WAAK,IAAIM,IAAI,CAAb,EAAgBA,IAAIH,gBAAgBI,MAApC,EAA4CD,GAA5C,EAAiD;AAC/C,YAAIE,QAAQ3B,IAAImB,IAAJ,CAASI,KAAT,CAAe,CAAf,EAAkBC,SAAlB,CAA4BC,CAA5B,CAAZ;AACA,YAAIpB,SAASsB,MAAMtB,MAAN,CAAaU,EAA1B;;AAEA,YAAIY,MAAMX,OAAN,IAAiBW,MAAMX,OAAN,CAAcV,IAAnC,EAAyC;AACvC,cAAIA,OAAOqB,MAAMX,OAAN,CAAcV,IAAzB;AACAP,yBAAe6B,eAAf,CAA+BvB,MAA/B,4BAA+DC,KAAKuB,SAAL,CAAe,CAAf,EAAkB,GAAlB,CAA/D,EAAyF,gBAAO1B,0BAAhG;AACD;;AAED,YAAIwB,MAAMG,QAAV,EAAoB;AAClB,cAAIxB,QAAOyB,KAAKC,SAAL,CAAeL,MAAMG,QAArB,CAAX;;AAEA/B,yBAAekC,WAAf,CAA2B5B,MAA3B,0BAAyDC,MAAKuB,SAAL,CAAe,CAAf,EAAkB,GAAlB,CAAzD,EAAmF,gBAAO1B,0BAA1F;AACA;AACD;AACF;;AAEDF,UAAIiC,UAAJ,CAAe,GAAf;AACD;;;;;;kBA0BYnC,c","file":"webhook.js","sourceRoot":"../../../../.."}